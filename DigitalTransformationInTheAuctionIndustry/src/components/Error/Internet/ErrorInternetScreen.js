import React, {Component} from 'react';
import {View, Text, StyleSheet, TouchableOpacity} from 'react-native';
import {Svg, Path} from 'react-native-svg';
import {noWifiStyle} from './ErrorInternetStyle';
import * as RootNavigation from '../../../navigation/rootNavigator';
import NetInfo from '@react-native-community/netinfo';
const NoWifiIcon = () => (
  <Svg
    width="134"
    height="122"
    viewBox="0 0 134 122"
    fill="none"
    xmlns="http://www.w3.org/2000/svg">
    <Path
      d="M67.0002 114.333C70.6821 114.333 73.6668 111.349 73.6668 107.667C73.6668 103.985 70.6821 101 67.0002 101C63.3183 101 60.3335 103.985 60.3335 107.667C60.3335 111.349 63.3183 114.333 67.0002 114.333Z"
      fill="#C7C7C7"
    />
    <Path
      d="M69.9335 54.333L57.2668 41.733L40.8669 25.4664L30.5335 15.133L18.4002 2.93302C17.7786 2.31143 17.0407 1.81836 16.2285 1.48196C15.4164 1.14556 14.5459 0.972412 13.6669 0.972412C12.7878 0.972412 11.9173 1.14556 11.1052 1.48196C10.293 1.81836 9.55511 2.31143 8.93352 2.93302C7.67816 4.18838 6.97291 5.89101 6.97291 7.66636C6.97291 9.4417 7.67816 11.1443 8.93352 12.3997L18.1335 21.533L27.8669 31.2664L42.7335 46.1997L53.0669 56.4664L71.3335 74.733L89.9335 93.3997L115.6 119.066C116.22 119.691 116.957 120.187 117.77 120.526C118.582 120.864 119.453 121.038 120.334 121.038C121.214 121.038 122.085 120.864 122.897 120.526C123.71 120.187 124.447 119.691 125.067 119.066C125.692 118.447 126.188 117.709 126.526 116.897C126.865 116.084 127.039 115.213 127.039 114.333C127.039 113.453 126.865 112.582 126.526 111.769C126.188 110.957 125.692 110.219 125.067 109.6L69.9335 54.333ZM131.8 33.8664C114.436 17.0275 91.1879 7.62762 67.0002 7.66636C56.9366 7.69364 46.9427 9.33678 37.4002 12.533L48.2002 23.333C61.2788 20.0651 74.9748 20.1867 87.9934 23.6863C101.012 27.1859 112.923 33.9479 122.6 43.333C123.836 44.5242 125.484 45.1929 127.2 45.1997C128.098 45.1963 128.986 45.0114 129.811 44.6563C130.636 44.3012 131.381 43.783 132 43.133C133.175 41.8642 133.811 40.1883 133.774 38.4593C133.737 36.7302 133.029 35.0833 131.8 33.8664ZM12.4669 25.333C8.8497 27.9344 5.41909 30.7858 2.20019 33.8664C1.0751 35.1174 0.464663 36.7476 0.491316 38.4299C0.517969 40.1122 1.17974 41.7222 2.34389 42.937C3.50804 44.1517 5.08845 44.8814 6.76811 44.9796C8.44777 45.0778 10.1024 44.5372 11.4002 43.4664C14.7249 40.3246 18.2914 37.449 22.0669 34.8664L12.4669 25.333ZM100.334 68.5997C100.951 69.2296 101.687 69.7308 102.5 70.0741C103.312 70.4174 104.185 70.596 105.067 70.5997C106.37 70.5947 107.642 70.2082 108.728 69.4878C109.813 68.7673 110.664 67.7446 111.175 66.5461C111.685 65.3475 111.834 64.0256 111.601 62.7436C111.369 61.4617 110.766 60.276 109.867 59.333C104.306 53.5714 97.6491 48.9811 90.287 45.8325C82.925 42.6838 75.0072 41.0406 67.0002 40.9997H65.9335L81.6002 56.6664C88.714 59.0785 95.1405 63.1722 100.334 68.5997ZM36.5335 49.3997C31.8749 52.1131 27.6126 55.4556 23.8669 59.333C22.638 60.6326 21.9758 62.3671 22.0258 64.1549C22.0758 65.9428 22.834 67.6375 24.1335 68.8664C25.4331 70.0952 27.1676 70.7575 28.9554 70.7075C30.7433 70.6574 32.438 69.8993 33.6669 68.5997C37.5507 64.7385 42.0585 61.5605 47.0002 59.1997L36.5335 49.3997ZM43.8669 83.6664C42.5938 84.8952 41.8611 86.5794 41.8298 88.3485C41.8143 89.2245 41.9715 90.0949 42.2925 90.9101C42.6134 91.7253 43.0917 92.4694 43.7002 93.0997C44.3086 93.73 45.0353 94.2344 45.8387 94.5839C46.642 94.9334 47.5064 95.1213 48.3823 95.1367C50.1514 95.168 51.8605 94.4952 53.1335 93.2664C56.5656 90.101 60.9797 88.2087 65.6387 87.9053C70.2978 87.602 74.92 88.906 78.7335 91.5997L61.9335 74.7997C55.1416 75.8233 48.8317 78.92 43.8669 83.6664Z"
      fill="#C7C7C7"
    />
  </Svg>
);

export default class ErrorInternetScreen extends Component {
  constructor(props) {
    super(props);
    this.state = {
      isClick: false,
    };
  }
  render() {
    return (
      <View style={noWifiStyle.container}>
        <NoWifiIcon style={noWifiStyle.noWifiIcon} />
        <View>
          <Text style={noWifiStyle.noWifiText}>Không có mạng</Text>
        </View>
        <View style={noWifiStyle.messageDisplay}>
          <Text>Mạng của bạn đang gặp trục </Text>
          <Text>trặc vui lòng kiểm tra lại</Text>
        </View>
        <TouchableOpacity
          style={noWifiStyle.button}
          onPress={() => {
            if (!this.state.isClick) {
              this.setState({isClick: true});
              NetInfo.fetch().then(isConnected => {
                if (isConnected.isConnected) {
                  RootNavigation.goBack();
                  this.setState({isClick: false});
                } else {
                  ToastAndroid.show('Không có Internet', 1);
                  this.setState({isClick: false});
                }
              });
            }
          }}>
          <Text style={noWifiStyle.tryAgainText}>Thử lại</Text>
        </TouchableOpacity>
      </View>
    );
  }
}
